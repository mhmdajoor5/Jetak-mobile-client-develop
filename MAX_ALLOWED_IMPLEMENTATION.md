# ุชุทุจูู ููุทู max_allowed ู max_charge

## โ ุชู ุงูุญู ุจูุฌุงุญ!

ุชู ุชุทุจูู ูุธุงู ุชุณุนูุฑ ูุชูุฏู ููุฅุถุงูุงุช (Extras) ูุชูุญ ุชุญุฏูุฏ:
- **max_allowed**: ุนุฏุฏ ุงูุนูุงุตุฑ ุงููุณููุญ ุงุฎุชูุงุฑูุง ุจุฏูู ุฑุณูู ุฅุถุงููุฉ
- **max_charge**: ุงูุฑุณูู ุงูุฅุถุงููุฉ ููู ุนูุตุฑ ูุชุฌุงูุฒ ุงูุญุฏ ุงููุณููุญ

## ๐ง ุงูุชุบููุฑุงุช ุงููุทุจูุฉ

### 1. ุชุญุฏูุซ ูููุฐุฌ ExtraGroup
**ุงูููู**: `lib/src/models/extra_group.dart`

```dart
class ExtraGroup {
  String id;
  String name;
  int? maxAllowed; // ุนุฏุฏ ุงูุนูุงุตุฑ ุงููุณููุญ ุงุฎุชูุงุฑูุง ุจุฏูู ุฑุณูู ุฅุถุงููุฉ
  double maxCharge; // ุงูุฑุณูู ุงูุฅุถุงููุฉ ููู ุนูุตุฑ ูุชุฌุงูุฒ ุงูุญุฏ ุงููุณููุญ
}
```

### 2. ุชุญุฏูุซ ูููุฐุฌ Extra
**ุงูููู**: `lib/src/models/extra.dart`

```dart
class Extra {
  // ... ุงูุญููู ุงูููุฌูุฏุฉ
  double extraCharge; // ุงูุฑุณูู ุงูุฅุถุงููุฉ ููุนูุตุฑ
}
```

### 3. ุชุญุฏูุซ ุฏุงูุฉ ุญุณุงุจ ุงูุณุนุฑ ูู Cart
**ุงูููู**: `lib/src/models/cart.dart`

ุชู ุชุญุฏูุซ ุฏุงูุฉ `getFoodPrice()` ูุชุทุจู ุงูููุทู ุงูุฌุฏูุฏ:
- ุชุฌููุน ุงูุฅุถุงูุงุช ุญุณุจ ุงููุฌููุนุฉ
- ุชุทุจูู `max_allowed` ู `max_charge` ููู ูุฌููุนุฉ
- ุญุณุงุจ ุงูุณุนุฑ ุงูููุงุฆู

### 4. ุฅุถุงูุฉ ุฏุงูุฉ Helper ุฌุฏูุฏุฉ
**ุงูููู**: `lib/src/helpers/helper.dart`

ุชู ุฅุถุงูุฉ ุฏุงูุฉ `calculateExtrasPrice()` ูุญุณุงุจ ุณุนุฑ ุงูุฅุถุงูุงุช ูุน ูุฑุงุนุงุฉ ุงูููุทู ุงูุฌุฏูุฏ.

### 5. ุฅุตูุงุญ ูุดููุฉ Import
ุชู ุฅุถุงูุฉ import ููู `ExtraGroup` ูู ุฌููุน ุงููููุงุช ุงูุชู ุชุญุชุงุฌู:
- `lib/src/models/cart.dart`
- `lib/src/helpers/helper.dart`

## ๐ ูุซุงู ุนููู

### ุงูุณููุงุฑูู:
- ูุฌููุนุฉ ุฅุถุงูุงุช: "ุงุฎุชูุงุฑ ููุน ุงููุญู"
- `max_allowed = 3`
- `max_charge = 2.0`
- ุณุนุฑ ุงูุทุนุงู ุงูุฃุณุงุณู: 15.0

### ุงูุญุงูุงุช ุงููุฎุชููุฉ:

#### 1. ุงุฎุชูุงุฑ ุฅุถุงูุชูู ููุท (ุถูู ุงูุญุฏ ุงููุณููุญ)
```
ุงูุฅุถุงูุงุช: ุฏุฌุงุฌ (5.0) + ูุญู ุจูุฑู (8.0)
ุงูุณุนุฑ: 15.0 + 5.0 + 8.0 = 28.0
```

#### 2. ุงุฎุชูุงุฑ 3 ุฅุถุงูุงุช (ุจุงูุถุจุท ุงูุญุฏ ุงููุณููุญ)
```
ุงูุฅุถุงูุงุช: ุฏุฌุงุฌ (5.0) + ูุญู ุจูุฑู (8.0) + ูุญู ุบูู (10.0)
ุงูุณุนุฑ: 15.0 + 5.0 + 8.0 + 10.0 = 38.0
```

#### 3. ุงุฎุชูุงุฑ 4 ุฅุถุงูุงุช (ูุชุฌุงูุฒ ุงูุญุฏ ุงููุณููุญ)
```
ุงูุฅุถุงูุงุช: ุฏุฌุงุฌ (5.0) + ูุญู ุจูุฑู (8.0) + ูุญู ุบูู (10.0) + ูุญู ุฏูู ุฑููู (7.0)
ุงูุณุนุฑ: 15.0 + 5.0 + 8.0 + 10.0 + (7.0 + 2.0 ุฑุณูู ุฅุถุงููุฉ) = 47.0
```

## ๐ ุงูููุทู ุงููุทุจู

```dart
if (extraGroup.maxAllowed != null && groupExtras.length > extraGroup.maxAllowed!) {
  // ุนุฏุฏ ุงูุฅุถุงูุงุช ูุชุฌุงูุฒ ุงูุญุฏ ุงููุณููุญ
  int allowedCount = extraGroup.maxAllowed!;
  
  // ุญุณุงุจ ุณุนุฑ ุงูุฅุถุงูุงุช ุงููุณููุญุฉ
  for (int i = 0; i < allowedCount && i < groupExtras.length; i++) {
    totalPrice += groupExtras[i].price;
  }
  
  // ุฅุถุงูุฉ ุงูุฑุณูู ุงูุฅุถุงููุฉ ููุฅุถุงูุงุช ุงูุชู ุชุชุฌุงูุฒ ุงูุญุฏ
  for (int i = allowedCount; i < groupExtras.length; i++) {
    totalPrice += groupExtras[i].price + extraGroup.maxCharge;
  }
} else {
  // ุนุฏุฏ ุงูุฅุถุงูุงุช ุถูู ุงูุญุฏ ุงููุณููุญ ุฃู ูุง ููุฌุฏ ุญุฏ
  for (var extra in groupExtras) {
    totalPrice += extra.price;
  }
}
```

## ๐ ุงููููุงุช ุงููุญุฏุซุฉ

1. `lib/src/models/extra_group.dart` - ุฅุถุงูุฉ maxAllowed ู maxCharge
2. `lib/src/models/extra.dart` - ุฅุถุงูุฉ extraCharge
3. `lib/src/models/cart.dart` - ุชุญุฏูุซ getFoodPrice() ูุฅุถุงูุฉ import
4. `lib/src/helpers/helper.dart` - ุฅุถุงูุฉ calculateExtrasPrice() ูimport
5. `lib/src/controllers/cart_controller.dart` - ุชุญุฏูุซ calculateSubtotal()
6. `lib/src/controllers/food_controller.dart` - ุชุญุฏูุซ calculateTotal()

## โ ุงูุชุญูู ูู ุงูุญู

ุชู ุชุดุบูู `flutter analyze` ู `flutter pub get` ุจูุฌุงุญ ุจุฏูู ุฃุฎุทุงุก.

## โ ุงููุฒุงูุง

1. **ูุฑููุฉ ูู ุงูุชุณุนูุฑ**: ูููู ุชุญุฏูุฏ ุญุฏูุฏ ูุฎุชููุฉ ููู ูุฌููุนุฉ ุฅุถุงูุงุช
2. **ุฑุณูู ุฅุถุงููุฉ ูุงุจูุฉ ููุชุฎุตูุต**: ูููู ุชุญุฏูุฏ ุฑุณูู ูุฎุชููุฉ ููู ูุฌููุนุฉ
3. **ุชูุงูู ูุน ุงููุธุงู ุงูุญุงูู**: ูุง ูุคุซุฑ ุนูู ุงูุฅุถุงูุงุช ุงูุชู ูุง ุชุญุชูู ุนูู max_allowed
4. **ุณูููุฉ ุงูุงุณุชุฎุฏุงู**: ุงูููุทู ูุทุจู ุชููุงุฆูุงู ูู ุฌููุน ุนูููุงุช ุญุณุงุจ ุงูุณุนุฑ
5. **ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู ุงูููุฏ**: ุชู ุญู ุฌููุน ูุดุงูู Import

## ๐ฎ ุงูุงุณุชุฎุฏุงู ุงููุณุชูุจูู

ูููู ุงุณุชุฎุฏุงู ูุฐุง ุงููุธุงู ูู:
- ูุฌููุนุงุช ุงููุญูู ูุน ุญุฏ ุฃูุตู ููุงุฎุชูุงุฑ
- ุงูุตูุตุงุช ูุน ุฑุณูู ุฅุถุงููุฉ ูููููุงุช ุงููุจูุฑุฉ
- ุงูุฅุถุงูุงุช ุงููููุฒุฉ ูุน ุชุณุนูุฑ ุฎุงุต
- ุฃู ูุฌููุนุฉ ุฅุถุงูุงุช ุชุญุชุงุฌ ุฅูู ูููุฏ ุนูู ุงููููุฉ

## ๐ ุฌุงูุฒ ููุงุณุชุฎุฏุงู

ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูู ุงูุชุทุจูู! ููููู ุงูุขู:
1. ุชุญุฏูุฏ `max_allowed` ู `max_charge` ูู API
2. ุงููุธุงู ุณูุทุจู ุงูููุทู ุชููุงุฆูุงู
3. ุณูุชู ุญุณุงุจ ุงูุฃุณุนุงุฑ ุจุดูู ุตุญูุญ ูู ุงูุณูุฉ ูุงูุทูุจุงุช 