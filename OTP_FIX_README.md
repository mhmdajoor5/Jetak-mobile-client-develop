# ุฅุตูุงุญ ูุดููุฉ OTP ูู ุงูุชุทุจูู

## ุงููุดุงูู ุงูููุชุดูุฉ

### 1. ุชุฌุงูุฒ OTP ููุนู
- **ุงูููู**: `lib/src/elements/MobileVerificationBottomSheetWidget.dart`
- **ุงููุดููุฉ**: `skipOTP = true` ูุงู ููุนูุงู ุฏุงุฆูุงู
- **ุงูุญู**: ุชู ุชุนุทููู ููุตุจุญ `skipOTP = false`

### 2. ูุดููุฉ ูู ุฏุงูุฉ ุงูุชุญูู
- **ุงูููู**: `lib/src/repository/user_repository.dart`
- **ุงููุดููุฉ**: ุฏุงูุฉ `verifyOTP` ูู ุชูู ุชุฑุฌุน `true` ุนูุฏ ุงููุฌุงุญ
- **ุงูุญู**: ุชู ุฅุตูุงุญ ุงูุฏุงูุฉ ูุชุฑุฌุน `true` ุนูุฏ ูุฌุงุญ ุงูุชุญูู

### 3. ูุดููุฉ ูู ุชุญุฏูุซ ุญุงูุฉ ุงูุชุญูู
- **ุงูููู**: `lib/src/models/user.dart`
- **ุงููุดููุฉ**: ุฏุงูุฉ `updatePhoneVerification` ูู ุชูู ุชุญุฏุซ `verifiedPhone` ุจุดูู ุตุญูุญ
- **ุงูุญู**: ุชู ุฅุถุงูุฉ ููุทู ูุชุญุฏูุซ `verifiedPhone` ุจุดูู ุตุญูุญ

### 4. ูุดููุฉ ูู ุงูุชูุฌูู ุจุนุฏ ุงูุชุญูู โญ **ุฌุฏูุฏ**
- **ุงูููู**: `lib/src/elements/MobileVerificationBottomSheetWidget.dart`
- **ุงููุดููุฉ**: ุจุนุฏ ุงูุชุญูู ูู OTP ูู ูุชู ุงูุชูุฌูู ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- **ุงูุญู**: ุชู ุฅุถุงูุฉ ููุทู ุฐูู ููุชูุฌูู ุงูุชููุงุฆู

## ุงูุชุบููุฑุงุช ุงููุทุจูุฉ

### 1. ุฅุตูุงุญ MobileVerificationBottomSheetWidget.dart
```dart
// ูุจู
final bool skipOTP = true; // โ ุชุฌุงูุฒ ุงูุชุญูู ุฏุงุฆูุงู

// ุจุนุฏ
final bool skipOTP = false; // โ ุชุนุทูู ุชุฌุงูุฒ ุงูุชุญูู ููุงุฎุชุจุงุฑ
```

### 2. ุฅุตูุงุญ user_repository.dart
```dart
// ุฅุถุงูุฉ ุฑุณุงุฆู ุชุดุฎูุต
print('๐ ุจุฏุก ุงูุชุญูู ูู OTP: $otp');
print('๐ค ุฅุฑุณุงู ุทูุจ ุฅูู: $url');

// ุฅุตูุงุญ ุฅุฑุฌุงุน ุงููููุฉ
return true; // โ ุฅุฑุฌุงุน true ุนูุฏ ุงููุฌุงุญ
```

### 3. ุฅุตูุงุญ user.dart
```dart
// ุฅุถุงูุฉ ุชุญุฏูุซ verifiedPhone
if (customFields?.verifiedPhone == null) {
  customFields ??= CustomFields();
  customFields!.verifiedPhone = CustomFieldValue(
    value: value ? "1" : "0",
    view: value ? "ููุนู" : "ุบูุฑ ููุนู",
    name: "verifiedPhone"
  );
}
```

### 4. ุฅุถุงูุฉ ููุทู ุงูุชูุฌูู ุงูุฐูู โญ **ุฌุฏูุฏ**
```dart
// ุจุนุฏ ูุฌุงุญ ุงูุชุญูู ูู OTP
print('๐ ุจุฏุก ุงูุชูุฌูู ุจุนุฏ ุงูุชุญูู ูู OTP');

// ุงุณุชุฏุนุงุก callback ุฅุฐุง ูุงู ููุฌูุฏุงู
widget.valueChangedCallback?.call(true);

// ุฅุบูุงู ุงูู bottom sheet ุฅุฐุง ูุงู ููุชูุญุงู
if (Navigator.canPop(context)) {
  Navigator.pop(context);
}

// ุงูุชูุฌูู ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุจุนุฏ ุชุฃุฎูุฑ ูุตูุฑ
Future.delayed(const Duration(milliseconds: 500), () {
  if (mounted) {
    print('๐ ุงูุชูุฌูู ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ');
    Navigator.of(context).pushReplacementNamed('/Pages', arguments: 0);
  }
});
```

## ููููุฉ ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ ูู ุงูุชุทุจูู
1. ูู ุจุชุดุบูู ุงูุชุทุจูู
2. ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุชุญูู ูู ุงููุงุชู
3. ุฃุฏุฎู ุฑูุฒ OTP
4. ุชุญูู ูู ุฑุณุงุฆู ุงูุชุดุฎูุต ูู Console
5. **ุชุฃูุฏ ูู ุงูุชูุฌูู ุงูุชููุงุฆู ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ** โญ

### 2. ุงุฎุชุจุงุฑ API ูุจุงุดุฑุฉ
```bash
# ุฅุฑุณุงู OTP
curl -X POST https://carrytechnologies.co/api/send-sms \
  -H "Content-Type: application/json" \
  -d '{"api_token":"YOUR_TOKEN","phone":"PHONE_NUMBER"}'

# ุงูุชุญูู ูู OTP
curl -X POST https://carrytechnologies.co/api/submit-otp \
  -H "Content-Type: application/json" \
  -d '{"api_token":"YOUR_TOKEN","code":"OTP_CODE"}'
```

### 3. ุงุฎุชุจุงุฑ ุจุงุณุชุฎุฏุงู ุงูููู ุงููุฑูู
```bash
dart test_otp.dart
dart test_navigation.dart
```

## ุฑุณุงุฆู ุงูุชุดุฎูุต ุงููุถุงูุฉ

### ูู sendOTP
- `๐ฑ ุจุฏุก ุฅุฑุณุงู OTP ุฅูู: [phone]`
- `๐ค ุฅุฑุณุงู ุทูุจ ุฅูู: [url]`
- `๐ API Token: [token]`
- `๐ค ุงูุจูุงูุงุช ุงููุฑุณูุฉ: [data]`
- `๐ฅ ุงุณุชุฌุงุจุฉ ุงูุฎุงุฏู: [status]`
- `๐ฅ ูุญุชูู ุงูุงุณุชุฌุงุจุฉ: [body]`

### ูู verifyOTP
- `๐ ุจุฏุก ุงูุชุญูู ูู OTP: [code]`
- `๐ค ุฅุฑุณุงู ุทูุจ ุฅูู: [url]`
- `๐ฅ ุงุณุชุฌุงุจุฉ ุงูุฎุงุฏู: [status]`
- `๐ฅ ูุญุชูู ุงูุงุณุชุฌุงุจุฉ: [body]`
- `โ ุชู ุงูุชุญูู ูู OTP ุจูุฌุงุญ`
- `๐ฑ ุญุงูุฉ ุงูุชุญูู ูู ุงููุงุชู: [status]`

### ูู ุงูุชูุฌูู โญ **ุฌุฏูุฏ**
- `๐ ุจุฏุก ุงูุชูุฌูู ุจุนุฏ ุงูุชุญูู ูู OTP`
- `๐ ุจุฏุก ุงูุชูุฌูู ุจุนุฏ ุชุฌุงูุฒ OTP`
- `๐ ุงูุชูุฌูู ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ`

## ููุงุญุธุงุช ูููุฉ

1. **ุชุฃูุฏ ูู ุตุญุฉ API Token**: ูุฌุจ ุฃู ูููู ุงููุณุชุฎุฏู ูุณุฌู ุฏุฎูู
2. **ุชุฃูุฏ ูู ุตุญุฉ ุฑูู ุงููุงุชู**: ูุฌุจ ุฃู ูููู ุจุชูุณูู ุตุญูุญ
3. **ุชุญูู ูู ุงุณุชุฌุงุจุฉ ุงูุฎุงุฏู**: ุฑุงูุจ ุฑุณุงุฆู ุงูุชุดุฎูุต ูู Console
4. **ูู ุญุงูุฉ ุงููุดู**: ุชุญูู ูู ุฑุณุงุฆู ุงูุฎุทุฃ ูู Console
5. **ุงูุชูุฌูู ุงูุชููุงุฆู**: ุจุนุฏ ูุฌุงุญ ุงูุชุญูู ุณูุชู ุงูุชูุฌูู ุชููุงุฆูุงู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ โญ

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ูู ูุชู ุฅุฑุณุงู OTP
1. ุชุญูู ูู ุตุญุฉ API Token
2. ุชุญูู ูู ุตุญุฉ ุฑูู ุงููุงุชู
3. ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
4. ุชุญูู ูู ุงุณุชุฌุงุจุฉ ุงูุฎุงุฏู

### ุฅุฐุง ูุดู ุงูุชุญูู ูู OTP
1. ุชุญูู ูู ุตุญุฉ ุงูููุฏ ุงููุฏุฎู
2. ุชุญูู ูู ุงูุชูุงุก ุตูุงุญูุฉ ุงูููุฏ
3. ุชุญูู ูู ุงุณุชุฌุงุจุฉ ุงูุฎุงุฏู
4. ุชุญูู ูู ุฑุณุงุฆู ุงูุฎุทุฃ ูู Console

### ุฅุฐุง ูู ูุชู ุงูุชูุฌูู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ โญ **ุฌุฏูุฏ**
1. ุชุญูู ูู ุฑุณุงุฆู ุงูุชุดุฎูุต ูู Console
2. ุชุฃูุฏ ูู ุฃู `Navigator.canPop(context)` ูุนูู ุจุดูู ุตุญูุญ
3. ุชุญูู ูู ุฃู `mounted` ุตุญูุญ ูุจู ุงูุชูุฌูู
4. ุชุฃูุฏ ูู ุฃู ุงููุณุงุฑ `/Pages` ููุฌูุฏ ูู `route_generator.dart`

## ุฅุนุงุฏุฉ ุชูุนูู ุชุฌุงูุฒ OTP (ููุงุฎุชุจุงุฑ ููุท)

ุฅุฐุง ููุช ุชุฑูุฏ ุชุฌุงูุฒ OTP ููุงุฎุชุจุงุฑุ ููููู ุชุบููุฑ:
```dart
final bool skipOTP = true; // โ ุชุฌุงูุฒ ุงูุชุญูู ููุงุฎุชุจุงุฑ
```

**ุชุญุฐูุฑ**: ูุง ุชุณุชุฎุฏู ูุฐุง ูู ุงูุฅูุชุงุฌ!

## ุงูุชุญุฏูุซุงุช ุงูุฌุฏูุฏุฉ โญ

### ุฅุตูุงุญ ุงูุชูุฌูู ุงูุชููุงุฆู
- โ ุฅุถุงูุฉ ููุทู ุฐูู ููุชูุฌูู ุจุนุฏ ูุฌุงุญ ุงูุชุญูู
- โ ุฅุบูุงู ุชููุงุฆู ููู bottom sheet
- โ ุชุฃุฎูุฑ ูุตูุฑ (500ms) ูุจู ุงูุชูุฌูู
- โ ุฑุณุงุฆู ุชุดุฎูุต ููุตูุฉ ููุชูุฌูู
- โ ุฏุนู ููุง ุงูุญุงูุชูู: OTP ุนุงุฏู ูุชุฌุงูุฒ OTP 